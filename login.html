<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Entre Alunos - Login</title>
 
  <style>

    body {

      margin: 0;

      font-family: Arial, sans-serif;

      background: linear-gradient(135deg, #bcdcff, #d9ecff, #c7e2ff);

      height: 100vh;

      display: flex;

      justify-content: center;

      align-items: center;

    }
 
    .container {

      background: #ffffffcc;

      backdrop-filter: blur(10px);

      padding: 40px;

      border-radius: 20px;

      box-shadow: 0 4px 20px rgba(0,0,0,0.1);

      width: 350px;

      text-align: center;

    }
 
    h1 {

      margin-bottom: 15px;

      color: #2979ff;

    }
 
    select, input {

      width: 100%;

      padding: 10px;

      margin: 8px 0;

      border: 1px solid #a7c9ff;

      border-radius: 10px;

      background: #eef7ff;

    }
 
    button {

      width: 100%;

      padding: 12px;

      border: none;

      border-radius: 10px;

      background: #2979ff;

      color: white;

      font-size: 15px;

      margin-top: 10px;

      cursor: pointer;

      transition: 0.2s;

    }
 
    button:hover {

      background: #1f5dcc;

    }
 
    .link {

      margin-top: 15px;

      display: block;

      color: #2979ff;

      text-decoration: none;

    }
 
    .link:hover {

      text-decoration: underline;

    }
</style>
</head>
 
<body>
 
  <!-- LOGIN -->
<div class="container" id="loginArea">
<h1>Entre Alunos</h1>
<h3>Login</h3>
 
    <select id="tipoUsuario">
<option value="aluno">Sou Aluno</option>
<option value="gestor">Sou Gestor</option>
</select>
 
    <input type="email" id="emailLogin" placeholder="E-mail" />
<input type="password" id="senhaLogin" placeholder="Senha" />
 
    <button onclick="login()">Entrar</button>
 
    <p style="font-size:14px; margin-top:15px;">
<a class="link" href="#" onclick="mostrarCadastro()">Não tem conta? Cadastre-se</a>
</p>    
<a class="link" href="#" onclick="mostrarRecuperar()">Esqueci minha senha</a>
</div>
 
  <!-- CADASTRO -->
<div class="container" id="cadastroArea" style="display:none;">
<h1>Cadastro</h1>
 
    <select id="cadTipo">
<option value="aluno">Aluno</option>
<option value="gestor">Gestor</option>
</select>
 
    <input type="text" id="cadNome" placeholder="Nome completo" />
 
    <div id="camposAluno">
<input type="text" id="cadTurma" placeholder="Turma (ex: 2A)" />
<input type="text" id="cadMatricula" placeholder="RA do Aluno" />
</div>
 
    <div id="camposGestor" style="display:none;">
<input type="text" id="cadCargo" placeholder="Cargo (ex: Coordenador)" />
<input type="text" id="cadCodigoGestor" placeholder="Código de Autorização" />
</div>
 
    <input type="email" id="cadEmail" placeholder="E-mail" />
<input type="password" id="cadSenha" placeholder="Senha" />
 
    <button onclick="cadastrar()">Cadastrar</button>
<a class="link" href="#" onclick="mostrarLogin()">Já tenho conta</a>
</div>
 
  <!-- RECUPERAÇÃO DE SENHA -->
<div class="container" id="recuperarArea" style="display:none;">
<h1>Recuperar Senha</h1>
 
    <div id="recPasso1">
<p>Digite seu e-mail cadastrado:</p>
<input type="email" id="recEmail" placeholder="E-mail" />
<button onclick="verificarEmail()">Continuar</button>
</div>
 
    <div id="recPasso2" style="display:none;">
<p>E-mail encontrado! Digite sua nova senha:</p>
<input type="password" id="novaSenha" placeholder="Nova senha" />
<button onclick="salvarNovaSenha()">Salvar nova senha</button>
</div>
 
    <a class="link" href="#" onclick="mostrarLogin()">Voltar</a>
</div>
 
<script>

/* ----------------  TROCA DE ÁREAS (TELAS) ---------------- */
 
function mostrarCadastro() {

  loginArea.style.display = "none";

  recuperarArea.style.display = "none";

  cadastroArea.style.display = "block";

}
 
function mostrarLogin() {

  cadastroArea.style.display = "none";

  recuperarArea.style.display = "none";

  loginArea.style.display = "block";

}
 
function mostrarRecuperar() {

  loginArea.style.display = "none";

  cadastroArea.style.display = "none";

  recuperarArea.style.display = "block";

}
 
/* --------- MOSTRAR CAMPOS CORRETOS NO CADASTRO --------- */

document.getElementById("cadTipo").addEventListener("change", atualizarCampos);

function atualizarCampos() {

  const tipo = cadTipo.value;

  camposAluno.style.display = tipo === "aluno" ? "block" : "none";

  camposGestor.style.display = tipo === "gestor" ? "block" : "none";

}
 
/* ---------------------- CADASTRAR ---------------------- */
 
function cadastrar() {

  let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
 
  const tipo = cadTipo.value;

  const nome = cadNome.value.trim();

  const email = cadEmail.value.trim();

  const senha = cadSenha.value.trim();
 
  if (!nome || !email || !senha) {

    alert("Preencha todos os campos!");

    return;

  }
 
  let novoUsuario = { tipo, nome, email, senha };
 
  if (tipo === "aluno") {

    const turma = cadTurma.value.trim();

    const ra = cadMatricula.value.trim();
 
    if (!turma || !ra) {

      alert("Preencha todos os campos de aluno!");

      return;

    }
 
    novoUsuario.turma = turma;

    novoUsuario.ra = ra;

  }
 
  if (tipo === "gestor") {

    const cargo = cadCargo.value.trim();

    const codigoGestor = cadCodigoGestor.value.trim();
 
    if (!cargo || !codigoGestor) {

      alert("Preencha todos os campos de gestor!");

      return;

    }
 
    novoUsuario.cargo = cargo;

    novoUsuario.codigoGestor = codigoGestor;

  }
 
  usuarios.push(novoUsuario);

  localStorage.setItem("usuarios", JSON.stringify(usuarios));

  alert("Cadastro realizado!");

  mostrarLogin();

}
 
/* ---------------------- LOGIN (ATUALIZADO) ---------------------- */
 
tipoUsuario.addEventListener("change", function () {

  senhaLogin.placeholder = tipoUsuario.value === "gestor"  

    ? "Senha do Gestor" 

    : "Senha";

});
 
function login() {

  let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
 
  const email = emailLogin.value.trim();

  const senha = senhaLogin.value.trim();

  const tipo = tipoUsuario.value;
 
  if (!email || !senha) {

    alert("Preencha todos os campos!");

    return;

  }
 
  const encontrado = usuarios.find(

    u => u.email === email && u.senha === senha && u.tipo === tipo

  );
 
  if (encontrado) {

    alert("Bem-vindo, " + encontrado.nome + "!");

    window.location.href = "home.html";  

  } else {

    alert("Dados incorretos.");

  }

}
 
/* ---------------- RECUPERAÇÃO DE SENHA (SEM CÓDIGO) ---------------- */
 
let usuarioRecuperacao = null;
 
function verificarEmail() {

  const emailDigitado = recEmail.value.trim();

  let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
 
  usuarioRecuperacao = usuarios.find(u => u.email === emailDigitado);
 
  if (!usuarioRecuperacao) {

    alert("E-mail não encontrado!");

    return;

  }
 
  recPasso1.style.display = "none";

  recPasso2.style.display = "block";

}
 
function salvarNovaSenha() {

  const nova = novaSenha.value.trim();

  if (!nova) {

    alert("Digite uma nova senha!");

    return;

  }
 
  let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
 
  usuarios = usuarios.map(u => {

    if (u.email === usuarioRecuperacao.email) {

      u.senha = nova;

    }

    return u;

  });
 
  localStorage.setItem("usuarios", JSON.stringify(usuarios));

  alert("Senha alterada!");

  mostrarLogin();

}
</script>
 
</body>
</html>
 
