<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Login - Entre Alunos</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:linear-gradient(180deg,#25478a 0%, #17305e 100%);}
  .container{max-width:400px;margin:6rem auto;background:white;padding:2rem;border-radius:1rem;box-shadow:0 10px 25px rgba(0,0,0,0.2);}
</style>
</head>
<body>
  <div class="container">
    <h2 class="text-xl font-bold mb-4 text-center text-slate-800">Login Entre Alunos</h2>
    <form id="login-form" class="flex flex-col gap-3">
      <input type="text" name="email" placeholder="Email" class="border rounded px-3 py-2 text-slate-900"/>
      <input type="password" name="password" placeholder="Senha" class="border rounded px-3 py-2 text-slate-900"/>
      
      <select id="role" class="border rounded px-3 py-2 text-slate-900">
        <option value="">Selecione seu papel</option>
        <option value="Aluno">Aluno</option>
        <option value="Gestor">Gestor</option>
      </select>
      
      <input type="password" id="manager-password" placeholder="Senha do gestor (se for gestor)" class="border rounded px-3 py-2 text-slate-900"/>
      
      <div id="login-error" class="text-red-500 text-sm hidden"></div>
      
      <button type="submit" class="bg-blue-700 text-white py-2 rounded hover:bg-blue-800">Entrar</button>
    </form>
  </div>

  <script>
    function clearErrors(){ document.getElementById('login-error').style.display='none'; }

    // função fictícia de validação (substitua pela sua lógica real)
    function validarLogin(email, senha){
      if(!email || !senha) return null;
      return {nome: email.split('@')[0], email};
    }

    document.getElementById('login-form').addEventListener('submit', function(e){
      e.preventDefault();
      clearErrors();

      const role = document.getElementById('role').value;
      const managerPassword = document.getElementById('manager-password').value;
      const email = this.email.value.trim();
      const senha = this.password.value;
      const errorDiv = document.getElementById('login-error');

      if(!role){
        errorDiv.textContent='Selecione seu papel (Aluno ou Gestor).';
        errorDiv.style.display='block';
        return;
      }

      if(role==='Gestor' && managerPassword!=='dand4'){
        errorDiv.textContent='Senha do gestor incorreta.';
        errorDiv.style.display='block';
        return;
      }

      const usuario = validarLogin(email, senha);
      if(!usuario){
        errorDiv.textContent='Email ou senha incorretos.';
        errorDiv.style.display='block';
        return;
      }

      localStorage.setItem('usuarioLogado', JSON.stringify(usuario));
      localStorage.setItem('role', role);
      localStorage.setItem('nomeUsuario', usuario.nome);

      window.location.href='index.html';
    });
  </script>
</body>
</html>
